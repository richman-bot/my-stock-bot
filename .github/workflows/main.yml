name: Run Stock Bot Daily

on:
  schedule:
    # 這是設定時間：每天台灣時間早上 09:30 執行
    - cron: '30 1 * * 1-5'
  workflow_dispatch: # 這行讓你可以在網頁上手動按「執行」

jobs:
  run_bot:
    runs-on: ubuntu-latest
    steps:
      - name: 複製程式碼
        uses: actions/checkout@v3
        
      - name: 安裝 Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
          
      - name: 安裝必要套件
        run: pip install yfinance pandas requests
        
      - name: 執行股票掃描
        env:
          # 這裡會去抓你剛才設定的隱私密碼
          TG_TOKEN: ${{ secrets.TG_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
        run: python stock_bot.py
